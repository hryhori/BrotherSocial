{"ast":null,"code":"import { getUsers, expandPage, followUser } from \"../../API/api\";\nconst FOLLOW_ACTION = \"FOLLOW-ACTION\";\nconst SET_USERS = \"SET-USERS\";\nconst SET_PAGE = \"CHANGE-PAGE\";\nconst SET_PAGE_SIZE = \"SET-PAGE-SIZE\";\nconst TOGGLE_IS_FETCHING = \"TOGGLE-IS-FETCHING\";\nconst TOGGLE_FOLLOWING = \"TOGGLE-FOLLOWING\";\nconst initialState = {\n  users: [],\n  totalUsersCount: 0,\n  pageSize: 5,\n  isFetching: false,\n  isFollowingInProgress: {\n    userId: null,\n    inProgress: false\n  }\n};\n\nconst FinderReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case FOLLOW_ACTION:\n      {\n        return { ...state,\n          users: state.users.map(user => {\n            if (user.id === action.user_id) {\n              return { ...user,\n                followed: !user.followed\n              };\n            }\n\n            return user;\n          })\n        };\n      }\n\n    case SET_USERS:\n      {\n        return { ...state,\n          users: action.users\n        };\n      }\n\n    case SET_PAGE:\n      {\n        return { ...state,\n          currentPage: action.pageId\n        };\n      }\n\n    case SET_PAGE_SIZE:\n      {\n        return { ...state,\n          pageSize: action.size\n        };\n      }\n\n    case TOGGLE_IS_FETCHING:\n      {\n        return { ...state,\n          isFetching: action.isFetching\n        };\n      }\n\n    case TOGGLE_FOLLOWING:\n      {\n        return { ...state,\n          isFollowingInProgress: action.isFollowingInProgress\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\n_c = FinderReducer;\nexport const follow = userId => ({\n  type: FOLLOW_ACTION,\n  user_id: userId\n});\nexport const setUsers = users => ({\n  type: SET_USERS,\n  users\n});\nexport const setPage = page => ({\n  type: SET_PAGE,\n  pageId: page\n});\nexport const setPageSize = pageSize => ({\n  type: SET_PAGE_SIZE,\n  size: pageSize\n});\nexport const setIsFetching = isFetching => ({\n  type: TOGGLE_IS_FETCHING,\n  isFetching\n});\nexport const setIsFollowingInProgress = isFollowingInProgress => ({\n  type: TOGGLE_FOLLOWING,\n  isFollowingInProgress\n});\nexport const getUsersThunk = pageSize => {\n  return dispatch => {\n    dispatch(setIsFetching(true));\n    getUsers(null, pageSize).then(response => {\n      dispatch(setIsFetching(false));\n      dispatch(setUsers(response.items));\n    });\n  };\n};\nexport const expandPageThunk = pageSize => {\n  return dispatch => {\n    dispatch(setIsFetching(true));\n    dispatch(setPageSize(pageSize));\n    expandPage(pageSize).then(response => {\n      dispatch(setUsers(response.items));\n      dispatch(setIsFetching(false));\n    });\n  };\n};\nexport const followThunk = userId => {\n  return dispatch => {\n    dispatch(setIsFollowingInProgress({\n      userId,\n      inProgress: true\n    }));\n    followUser(follow_status, userId).then(resp => {\n      if (resp.resultCode === 0) {\n        dispatch(follow(userId));\n      }\n\n      dispatch(setIsFollowingInProgress({\n        userId,\n        inProgress: false\n      }));\n    });\n  };\n};\nexport default FinderReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"FinderReducer\");","map":{"version":3,"names":["getUsers","expandPage","followUser","FOLLOW_ACTION","SET_USERS","SET_PAGE","SET_PAGE_SIZE","TOGGLE_IS_FETCHING","TOGGLE_FOLLOWING","initialState","users","totalUsersCount","pageSize","isFetching","isFollowingInProgress","userId","inProgress","FinderReducer","state","action","type","map","user","id","user_id","followed","currentPage","pageId","size","follow","setUsers","setPage","page","setPageSize","setIsFetching","setIsFollowingInProgress","getUsersThunk","dispatch","then","response","items","expandPageThunk","followThunk","follow_status","resp","resultCode"],"sources":["/Users/gregmirny/Documents/learnreact/src/redux/reducers/finder-reducer.js"],"sourcesContent":["import { getUsers, expandPage, followUser } from \"../../API/api\";\n\n\nconst FOLLOW_ACTION = \"FOLLOW-ACTION\";\nconst SET_USERS =\"SET-USERS\";\nconst SET_PAGE = \"CHANGE-PAGE\";\nconst SET_PAGE_SIZE = \"SET-PAGE-SIZE\";\nconst TOGGLE_IS_FETCHING = \"TOGGLE-IS-FETCHING\";\nconst TOGGLE_FOLLOWING = \"TOGGLE-FOLLOWING\"\n\nconst initialState = {\n   users: [\n   ],\n    totalUsersCount: 0,\n    pageSize: 5,\n    isFetching: false,\n    isFollowingInProgress: {userId: null, inProgress: false},\n}\nconst FinderReducer = (state = initialState, action) =>{\n    switch(action.type){\n        case FOLLOW_ACTION:{\n            return {\n                ...state,\n                users: state.users.map(user =>{\n                    if(user.id === action.user_id )\n                    {\n                        return {...user, followed: !user.followed};\n                    }\n                    return user;\n                })\n            };\n        }\n        case SET_USERS:{\n            return {...state, users: action.users};\n        }\n        case SET_PAGE:{\n            return {...state, currentPage: action.pageId};\n        }\n        case SET_PAGE_SIZE:{\n            return {...state, pageSize: action.size};\n        }\n        case TOGGLE_IS_FETCHING:{\n            return {...state, isFetching: action.isFetching};\n        }\n        case TOGGLE_FOLLOWING:{\n            return {...state, isFollowingInProgress: action.isFollowingInProgress}\n        }\n        default:\n            return state;\n    }\n} \n\nexport const follow = (userId) => ({type: FOLLOW_ACTION, user_id: userId});\nexport const setUsers = (users) => ({type: SET_USERS, users});\nexport const setPage = (page) => ({type: SET_PAGE, pageId: page});\nexport const setPageSize = (pageSize) => ({type: SET_PAGE_SIZE, size: pageSize});\nexport const setIsFetching = (isFetching) => ({type: TOGGLE_IS_FETCHING, isFetching});\nexport const setIsFollowingInProgress = (isFollowingInProgress) => ({type: TOGGLE_FOLLOWING, isFollowingInProgress})\n\nexport const getUsersThunk = (pageSize) => {\n    return (dispatch) => {\n    dispatch(setIsFetching(true));\n      getUsers(null, pageSize).then((response) => {\n        dispatch(setIsFetching(false));\n        dispatch(setUsers(response.items));\n      });\n}}\n\nexport const expandPageThunk = (pageSize) => {\n    return (dispatch) =>{\n    dispatch(setIsFetching(true));\n    dispatch(setPageSize(pageSize));\n  expandPage(pageSize).then((response) => {\n    dispatch(setUsers(response.items));\n    dispatch(setIsFetching(false));\n  });\n}}\n\nexport const followThunk = (userId) =>{\n   return (dispatch) => {\n        dispatch(setIsFollowingInProgress({userId, inProgress: true}))\n        followUser(follow_status, userId)\n            .then((resp) => {\n                if(resp.resultCode === 0){\n                    dispatch(follow(userId));\n                }\n                dispatch(setIsFollowingInProgress({userId, inProgress: false}))\n            }\n        )\n}}\n\nexport default FinderReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}